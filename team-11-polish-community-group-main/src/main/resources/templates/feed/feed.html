<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post Feed</title>
    <link rel="stylesheet" href="/css/feed/feed.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <script defer src="/js/feed/feed.js"></script>
</head>
<section class="feed-container" layout:fragment="content">
    <div class="feed-hero">
        <h1>Community Posts Feed</h1>
    </div>

    <!-- posts will appear here -->
    <div id="postFeed" class="post-feed">
        <!-- using template since I want to use it  in javascript -->
        <template id="post-template" >
            <div class="post">
                <div class="post-header">
                    <div class="author-details">
                        <div class="profile-picture">
                            <!--add the profile picture later -->
                        </div>
                        <div class="text-details">
                            <h5 class="author"></h5>
                            <p class="author-title"></p>
                        </div>
                    </div>
                    <div class="post-manipulation">
                        <button title="Edit post" class="edit-post" id="edit-post">
                            <i class="bi bi-pencil"></i>
                        </button>
                        <button  title="Delete post" class="delete-post" id="delete-post">
                            <i class="bi bi-trash3"></i>
                        </button>
                    </div>

                </div>
                <div class="post-details">
                    <h3 class="post-title"></h3>
                    <p class="post-description"></p>
                    <div class="post-image">
                        <img src="" alt="Post Image">
                    </div>
                    <div class="post-tags">
                        <!-- Tags will be dynamically inserted -->
                    </div>
                </div>
                <div class="post-meta">
                    <div class="post-actions">
                        <button title="Like post" class="like-button">
                            <i class="bi bi-hand-thumbs-up"></i>
                            <span class="like-count">0</span>
                        </button>
                        <button title="Commend on post">
                            <i class="bi bi-chat-left"></i>
                            <span>35</span>
                        </button>
                        <button title="Share post" id="share-post" class="share-post">
                            <i class="bi bi-share"></i>
                        </button>
                    </div>
                    <span class="timestamp"></span>
                </div>
            </div>
        </template>
    </div>

    <button class="add-post" id="add-post"   >
        <i class="bi bi-plus"></i>
    </button>
    <div id="create-new-modal" class="create-new-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-desc">
                    <h3>Create a New Post</h3>
                    <p>Share your thoughts, ideas, or news with the community.</p>
                </div>
                <span class="close-modal" id="closeModalBtn"><i class="bi bi-x-lg"></i></span>
            </div>
            <form id="post-form">
                <label for="postTitle">Post Title
                    <input type="text" id="postTitle" name="postTitle"
                           placeholder="Post Title"
                           minlength="3"
                           maxlength="100"
                           required>
                </label>
                <label for="postDescription">Description
                    <textarea id="postDescription" name="postDescription"
                              placeholder="What's on your mind?"
                              rows="6"
                              minlength="10"
                              maxlength="1000"
                              required></textarea>
                </label>

                <label for="postImage">Image
                    <input type="file"
                           id="postImage"
                           name="postImage"
                           accept="image/*"
                           class="form-control">
                    <div id="imagePreview" class="mt-2"></div>
                </label>

                <label for="postTags">Tags
                    <input type="text" id="postTags" name="postTags"
                           placeholder="Enter tags separated by commas (e.g., news, community, event)"
                           pattern="^[a-zA-Z0-9\s,.-]+$"
                           title="Tags should be comma-separated and contain only letters, numbers, spaces, dots, and hyphens"
                           required>
                </label>
                <div class="form-buttons">
                    <button class="submit-button" type="submit">
                        <i class="bi bi-send"></i>
                        <p>Post</p>
                    </button>
                </div>
            </form>
        </div>
    </div>
</section>
</html>